<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usage &mdash; orthosnap  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=b745eb55" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Tutorial" href="../tutorial/index.html" />
    <link rel="prev" title="About" href="../about/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo_no_subtext.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basic-usage">Basic usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accounting-for-tree-uncertainty">Accounting for tree uncertainty</a></li>
<li class="toctree-l2"><a class="reference internal" href="#specifying-which-inparalog-to-keep">Specifying which inparalog to keep</a></li>
<li class="toctree-l2"><a class="reference internal" href="#report-inparalog-handling">Report inparalog handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#specifying-the-delimiter">Specifying the delimiter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#all-options">All options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../change_log/index.html">Change log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../other_software/index.html">Other software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">orthosnap</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Usage</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h1>
<p><strong>This section covers basic OrthoSNAP usage. We recommend going through the
tutorial as well, which gives a worked example of what OrthoSNAP does.</strong></p>
<p>OrthoSNAP fits into a larger pipeline to construct phylogenomic data matrices.
After calling orthologous groups of genes, it is common for the number of
single-copy orthologous groups of genes to be relatively few compared to all
orthologous groups. Typically, only single-copy orthologous groups of genes
are used for phylogenomic analyses. OrthoSNAP identifies subgroups of
single-copy orthologous genes in multi-copy orthologous groups of genes.</p>
<p>The input for OrthoSNAP is the phylogeny of the orthologous group of genes
and the unaligned FASTA file of sequences used to infer the phylogeny. The
output of OrthoSNAP are multi-FASTA files of subgroups of single-copy orthologous
genes appropriate for downstream analyses.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="basic-usage">
<h2>Basic usage<a class="headerlink" href="#basic-usage" title="Link to this heading"></a></h2>
<p>The following command is the simpliest iteration of OrthoSNAP and will suffice
for most use cases:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>orthosnap<span class="w"> </span>-f<span class="w"> </span>orthogroup_of_genes.faa<span class="w"> </span>-t<span class="w"> </span>phylogeny_of_orthogroup_of_genes.tre
</pre></div>
</div>
<p>Here, two required arguments are shown, the -f/--fasta argument, which specifies
the unaligned orthologous group of sequences, and the -t/--tree argument, which
species the phylogeny inferred from the orthologous group of sequences. The fasta
file should be in FASTA format and the tree file should be in newick format.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="accounting-for-tree-uncertainty">
<h2>Accounting for tree uncertainty<a class="headerlink" href="#accounting-for-tree-uncertainty" title="Link to this heading"></a></h2>
<p>As part of the OrthoSNAP pipeline, species-specific inparalogs and paralogs are pruned following the
approach described in <a class="reference external" href="https://journals.sagepub.com/doi/10.4137/EBO.S12813">PhyloTreePruner</a>.
To do so, poorly collapsed bipartitions are collapsed to account for tree uncertainty.</p>
<p>The default threshold for collapsing bipartitions is 80 and can be modified using the
-s/--support argument. For example, bipartitions can be collapsed using a threshold
of 70 using the following command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>orthosnap<span class="w"> </span>-f<span class="w"> </span>orthogroup_of_genes.faa<span class="w"> </span>-t<span class="w"> </span>phylogeny_of_orthogroup_of_genes.tre<span class="w"> </span>-s<span class="w"> </span><span class="m">70</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="specifying-which-inparalog-to-keep">
<h2>Specifying which inparalog to keep<a class="headerlink" href="#specifying-which-inparalog-to-keep" title="Link to this heading"></a></h2>
<p>During species-specific inparalog pruning, it is standard practice in transcriptomic analysis to keep the longest inparalog. However, this
may not always be the user’s preference. OrthoSNAP allows flexibility in which inparalog should be kept using the -ip /--inparalog_to_keep parameter.
Specifically, user’s can choose to keep the longest sequence length (default; longest_seq_len), shortest sequence length (shortest_seq_len), or
median sequence length (median_seq_len) in the case of three or more inparalogs. User’s can also choose which inparalog to
keep based on tree-based metrics: the longest branch length (longest_branch_len), the shortest branch length (shortest_branch_len), or the
median branch length (median_branch_len) in the case of three or more inparalogs.</p>
<p>For example, the inparalog with the shortest branch length can be kept using the following command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>orthosnap<span class="w"> </span>-f<span class="w"> </span>orthogroup_of_genes.faa<span class="w"> </span>-t<span class="w"> </span>phylogeny_of_orthogroup_of_genes.tre<span class="w"> </span>-ip<span class="w"> </span>shortest_branch_len
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>or the inparalog with the median sequence length can be kept using the following command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>orthosnap<span class="w"> </span>-f<span class="w"> </span>orthogroup_of_genes.faa<span class="w"> </span>-t<span class="w"> </span>phylogeny_of_orthogroup_of_genes.tre<span class="w"> </span>-ip<span class="w"> </span>median_seq_len
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Again, following transcriptomics, the default is to keep the longest sequence because (at least in theory)
it is the most complete gene annotation.</p>
</section>
<section id="report-inparalog-handling">
<h2>Report inparalog handling<a class="headerlink" href="#report-inparalog-handling" title="Link to this heading"></a></h2>
<p>To report inparalogs and specify which was kept per SNAP-OG, use the -rih, --report_inparalog_handling
argument. The resulting file, which will have the suffix “.inparalog_report.txt,” will have three columns: <br/>
- col 1 is the orthogroup file <br/>
- col 2 is the inparalog that was kept <br/>
- col 3 is/are the inparalog/s that were trimmed separated by a semi-colon “;”</p>
<p>To generate this file, use the following command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>orthosnap<span class="w"> </span>-f<span class="w"> </span>orthogroup_of_genes.faa<span class="w"> </span>-t<span class="w"> </span>phylogeny_of_orthogroup_of_genes.tre<span class="w"> </span>-rih
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="specifying-the-delimiter">
<h2>Specifying the delimiter<a class="headerlink" href="#specifying-the-delimiter" title="Link to this heading"></a></h2>
<p>As of version 1.3.2, OrthoSNAP supports an argument for user-defined delimiters between
the taxon name and gene name.</p>
<p>By default, the delimiter is a pipe character (or “|”), but can be changed by setting the
-d/--delimiter argument. For example, if “-” is the current delimiter between taxon and
gene names, use the following command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>orthosnap<span class="w"> </span>-f<span class="w"> </span>orthogroup_of_genes.faa<span class="w"> </span>-t<span class="w"> </span>phylogeny_of_orthogroup_of_genes.tre<span class="w"> </span>-d<span class="w"> </span>-
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="all-options">
<h2>All options<a class="headerlink" href="#all-options" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Usage and meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-h/--help</p></td>
<td><p>Print help message</p></td>
</tr>
<tr class="row-odd"><td><p>-v/--version</p></td>
<td><p>Print software version</p></td>
</tr>
<tr class="row-even"><td><p>-t/--tree</p></td>
<td><p>Input tree file (format: newick)</p></td>
</tr>
<tr class="row-odd"><td><p>-s/--support</p></td>
<td><p>Bipartition support threshold for collapsing uncertain branches (default: 80)</p></td>
</tr>
<tr class="row-even"><td><p>-o/--occupancy</p></td>
<td><p>Occupancy threshold for identifying a subgroup of interest (default: 50%)</p></td>
</tr>
<tr class="row-odd"><td><p>-r/--roooted</p></td>
<td><p>boolean argument for whether the input phylogeny is already rooted (default: false)</p></td>
</tr>
<tr class="row-even"><td><p>-d/--delimiter</p></td>
<td><p>specify the delimiter found between taxon names and gene names (default: “|”)</p></td>
</tr>
<tr class="row-odd"><td><p>-st/--snap_trees</p></td>
<td><p>boolean argument for whether trees of SNAP-OGs should be outputted (default: false)</p></td>
</tr>
<tr class="row-even"><td><p>-ip/--inparalog_to_keep</p></td>
<td><p>determine which sequence to keep in the case of species-specific inparalogs using sequence- or tree-based options (default: longest_seq_len)</p></td>
</tr>
<tr class="row-odd"><td><p>-op/--output_path</p></td>
<td><p>pathway for output files to be written (default: same as -f input)</p></td>
</tr>
<tr class="row-even"><td><p>-rih, --report_inparalog_handling</p></td>
<td><p>create a summary file of which inparalogs where kept compared to trimmed</p></td>
</tr>
</tbody>
</table>
<p><a href="#id1"><span class="problematic" id="id2">*</span></a>For genome-scale analyses, we recommend changing the -o/--occupancy parameter to be the same for all large gene families so that the minimum SNAP-OG occupancy is the same
for all SNAP-OGs.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../about/index.html" class="btn btn-neutral float-left" title="About" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../tutorial/index.html" class="btn btn-neutral float-right" title="Tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022 Jacob L. Steenwyk.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-104875636-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-104875636-1', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>